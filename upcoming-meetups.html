<link rel="import" href="../polymer/polymer.html" />
<link rel="import" href="meetup-service.html" />
<link rel="import" href="meetup-card.html" />

<polymer-element name="upcoming-meetups" attributes="urlname sigid sig hideDescription">

  <template>

    <link rel="stylesheet" href="meetup-element.css" />

    <meetup-service id="meetupservice" meetups="{{meetups}}" urlname="{{urlname}}" sigid="{{sigid}}" sig="{{sig}}" ></meetup-service>

         <div>
         <table>
          <template repeat="{{meetup in meetups}}">
          <tr>
            <td>
             <div class="date"><p>{{meetup.time | toDateDay}} <span>{{meetup.time | toDateMon}}</span></p></div>
           </td>
           <td>
             <div class="eventurl" onclick="window.open('{{meetup.event_url}}')" >{{meetup.name}}</div>
           </td>
           </tr>
          </template>
        </table>
        </div>


  </template>

  <script>

    Polymer({
      /**
       * The `author` attribute sets an initial author
       *
       * @attribute author
       * @type string
       * @default 'Dimitri Glazkov'
       */
      author: 'Lloyd Cledwyn',

      /**
       * `fancy` is a property that does something fancy.
       *
       * @property fancy
       * @type bool
       * @default false
       */
      fancy: false,

      ready: function() {
      } 
      , toDateDay: function(input){
        var d = (new Date(input)).getDate();
        return d;
      },
      toDateMon: function(input){
        var monthNames = [ "Jan", "Feb", "Mar", "Apr", "May", "Jun","Jul", "Aug", "Sep", "Oct", "Nov", "Dec" ];
        var m = monthNames[(new Date(input)).getMonth()];
        return m ;
      }
    });

  </script>

</polymer-element>
