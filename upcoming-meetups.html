<link rel="import" href="../polymer/polymer.html" />
<link rel="import" href="meetup-service.html" />
<link rel="import" href="meetup-card.html" />
<link rel="import" href="meetup-description.html"/>

<polymer-element name="upcoming-meetups" attributes="urlname sigid sig hideDescription">

  <template>

    <link rel="stylesheet" href="meetup-element.css" />
    <style>

    .date {
      float: left;
      margin: 5px;
  width: 30px; height: 40px;
  background: #fcfcfc; 
  background: linear-gradient(top, #fcfcfc 0%,#dad8d8 100%); 
  background: -moz-linear-gradient(top, #fcfcfc 0%, #dad8d8 100%); 
  background: -webkit-linear-gradient(top, #fcfcfc 0%,#dad8d8 100%); 
  border: 1px solid #d2d2d2;
  border-radius: 4px;
  -moz-border-radius: 4px;
  -webkit-border-radius: 4px;
  box-shadow: 0px 0px 15px rgba(0,0,0,0.1);
  -moz-box-shadow: 0px 0px 15px rgba(0,0,0,0.1);
  -webkit-box-shadow: 0px 0px 15px rgba(0,0,0,0.1);
}
  .date p {
    font-family: Helvetica, sans-serif;
    font-size: 20px; text-align: center; color: #9e9e9e; 
    -webkit-margin-before: 2px;
  }
  
  .date p span {
    background: #d10000; 
    background: linear-gradient(top, #d10000 0%, #7a0909 100%);
    background: -moz-linear-gradient(top, #d10000 0%, #7a0909 100%);
    background: -webkit-linear-gradient(top, #d10000 0%, #7a0909 100%);
    font-size: 11px; font-weight: bold; color: #fff; text-transform: uppercase;   
    display: block;
    border-top: 3px solid #a13838;
    border-radius: 0 0 4px 4px;
    -moz-border-radius: 0 0 4px 4px;
    -webkit-border-radius: 0 0 4px 4px;
    padding: 0px 0 3px 0;
  }

  .eventurl{
    float: left;
    cursor: pointer;
  }

@-moz-document url-prefix() {
    .date {
        padding: 16px 0 0 0;
    }
    .date p span {
      padding: 9px 0 3px 0;
    }
}
</style>

    <meetup-service id="meetupservice" data="{{data}}" urlname="{{urlname}}" sigid="{{sigid}}" sig="{{sig}}" serviceCmd="meetups"></meetup-service>

         <div>
         <table>
          <template repeat="{{meetup in data}}">
          <tr>
            <td>
             <div class="date"><p>{{meetup.time | toDateDay}} <span>{{meetup.time | toDateMon}}</span></p></div>
           </td>
           <td>
             <div class="eventurl" onclick="window.open('{{meetup.event_url}}')" >{{meetup.name}}</div>
           </td>
           </tr>
          </template>
        </table>
        </div>


  </template>

  <script>

    Polymer({
      /**
       * The `author` attribute sets an initial author
       *
       * @attribute author
       * @type string
       * @default 'Dimitri Glazkov'
       */
      author: 'Lloyd Cledwyn',

      /**
       * `fancy` is a property that does something fancy.
       *
       * @property fancy
       * @type bool
       * @default false
       */
      fancy: false,

      ready: function() {
      } 
      , toDateDay: function(input){
        var d = (new Date(input)).getDate();
        return d;
      },
      toDateMon: function(input){
        var monthNames = [ "Jan", "Feb", "Mar", "Apr", "May", "Jun","Jul", "Aug", "Sep", "Oct", "Nov", "Dec" ];
        var m = monthNames[(new Date(input)).getMonth()];
        return m ;
      }
    });

  </script>

</polymer-element>
